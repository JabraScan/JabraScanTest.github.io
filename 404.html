<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Redirigiendo...</title>

    <!-- ğŸ•µï¸ Evita que los motores de bÃºsqueda indexen esta pÃ¡gina de error -->
    <meta name="robots" content="noindex" />

    <!-- ğŸ¨ Estilos bÃ¡sicos para mostrar el mensaje de redirecciÃ³n -->
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        padding: 2em;
      }
    </style>
  </head>
  <body>
    <p>Redirigiendo a la aplicaciÃ³n...</p>
        <script>
          // ğŸ§­ Extrae el nombre del repositorio desde la URL
          // Ejemplo: /JabraScanTest.github.io/ObraX â†’ repoName = "JabraScanTest.github.io"
          const repoName = window.location.pathname.split('/')[1];
        
          // ğŸ” Obtiene la ruta completa eliminando las barras iniciales
          // Ejemplo: "/JabraScanTest.github.io/ObraX" â†’ "JabraScanTest.github.io/ObraX"
          const fullPath = window.location.pathname.replace(/^\/+/, "");
        
          // ğŸ§© Elimina el nombre del repositorio para obtener la ruta interna relativa
          // Ejemplo: "JabraScanTest.github.io/ObraX" â†’ "ObraX"
          const rutaRelativa = fullPath.startsWith(repoName + "/")
            ? fullPath.slice(repoName.length + 1)
            : fullPath;
        
          // ğŸ›‘ Detecta si ya estÃ¡s en index.html (en cualquier parte de la ruta)
          // Esto previene redirecciones innecesarias o bucles infinitos
          const yaEnIndex = window.location.pathname.includes("index.html");
        
          // ğŸ§ª Detecta si ya hay un parÃ¡metro redirect en la URL
          // Si existe, significa que ya se ha redirigido correctamente
          const tieneRedirect = window.location.search.includes("redirect=");
        
          // ğŸš« Considera invÃ¡lida cualquier ruta vacÃ­a o que contenga "index.html"
          // Esto evita que se intente cargar index.html como si fuera una obra
          const esRutaInvalida = !rutaRelativa || rutaRelativa.includes("index.html");
        
          // âœ… Redirige solo si:
          // - No estÃ¡s ya en index.html
          // - No hay parÃ¡metro redirect
          // - La ruta relativa es vÃ¡lida (no vacÃ­a ni apunta a index.html)
          if (!yaEnIndex && !tieneRedirect && !esRutaInvalida) {
            // ğŸš€ Redirige a index.html con la ruta original como parÃ¡metro
            // Esto permite que la SPA interprete la ruta y cargue la vista correspondiente
            window.location.replace(`/${repoName}/index.html?redirect=${encodeURIComponent(rutaRelativa)}`);
          }
        </script>

  </body>
</html>
