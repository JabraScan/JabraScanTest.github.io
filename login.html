<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Página de Login</title>
  <!-- CSS específico del login -->
  <link rel="stylesheet" href="css/login.css">

  <script>
    // Si los CSS modulares no están cargados, los añadimos
    if (!document.querySelector('link[href*="css/variables.css"]')) {
      const cssModules = ['variables.css', 'header.css', 'utilities.css'];
      cssModules.forEach(module => {
        const link = document.createElement("link");
        link.rel = "stylesheet";
        link.href = `css/${module}`;
        document.head.appendChild(link);
      });
    }

    // Si Bootstrap CSS no está cargado, lo añadimos
    if (!document.querySelector('link[href*="bootstrap"]')) {
      const bsCss = document.createElement("link");
      bsCss.rel = "stylesheet";
      bsCss.href = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css";
      document.head.appendChild(bsCss);
    }
  </script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const token = params.get("token");
    if (token) {
      localStorage.setItem("jwt", token);
      window.location.href = "/"; // redirige al inicio ya con token guardado
    }
  </script>
  <script src="js/login.js"></script>
</head>
<body>
  <main class="d-flex justify-content-center">
    <div class="login-container card shadow p-4" style="max-width: 400px; width: 100%;">
      <h1 class="h4 mb-4 text-center">Inicia sesión</h1>

      <!-- Logo circular -->
      <div class="text-center mb-4">
        <img src="img/RexJabra.png" alt="Logo RexJabra" class="login-logo">
      </div>

      <!-- Botón Google -->
      <button class="btn btn-primary w-100 mb-3 d-flex align-items-center justify-content-center" id="btnGoogle">
        <img src="img/google.png" alt="Google logo" class="me-2 login-icon">
        Login con Google
      </button>

      <!-- Botón Meta -->
      <button class="btn btn-info w-100 d-flex align-items-center justify-content-center" id="btnMeta">
        Login con 
        <img src="img/Meta_Platforms_Inc._logo.svg" alt="Meta logo" class="ms-2 login-icon">
      </button>

      <div class="user-info mt-3 text-center" id="userInfo"></div>
    </div>
  </main>
  <!-- Script condicional para Bootstrap JS -->
  <script>
    if (!window.bootstrap) {
      const bsJs = document.createElement("script");
      bsJs.src = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js";
      document.body.appendChild(bsJs);
    }
  </script>

  <!-- Script de login -->
  <script src="js/login.js"></script>
</body>
</html>
